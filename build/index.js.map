{"version":3,"sources":["../server/index.js"],"names":["PORT","process","env","app","use","urlencoded","extended","json","mode","argv","length","connect","err","console","log","exit","listen"],"mappings":";;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAMA,OAAOC,QAAQC,GAAR,CAAYF,IAAZ,IAAoB,IAAjC;;AAEA,IAAMG,MAAM,wBAAZ;AACAA,IAAIC,GAAJ,CAAQ,qBAAWC,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACAH,IAAIC,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;AACAJ,IAAIC,GAAJ,CAAQ,qBAAR;;AAEA;AACAD,IAAIC,GAAJ,CAAQ,sBAAO,KAAP,CAAR;;AAEA,IAAMI,OACJP,QAAQQ,IAAR,CAAaR,QAAQQ,IAAR,CAAaC,MAAb,GAAsB,CAAnC,MAA0C,MAA1C,sCADF;;AAKA;AACA,aAAGC,OAAH,CAAWH,IAAX,EAAiB,UAASI,GAAT,EAAc;AAC7B,MAAIA,GAAJ,EAAS;AACPC,YAAQC,GAAR,CAAY,6BAAZ;AACAb,YAAQc,IAAR,CAAa,CAAb;AACD,GAHD,MAGO;AACL;AACAZ,QAAIC,GAAJ,CAAQ,MAAR;AACAD,QAAIC,GAAJ,CAAQ,OAAR;;AAEA;AACAD,QAAIa,MAAJ,CAAWhB,IAAX,EAAiB,YAAM;AACrBa,cAAQC,GAAR,wBAAiCd,IAAjC;AACD,KAFD;AAGD;AACF,CAdD","file":"index.js","sourcesContent":["import express from 'express';\nimport cors from 'cors';\nimport bodyParser from 'body-parser';\nimport morgan from 'morgan';\nimport db, { MODE_TEST, MODE_PRODUCTION } from './helpers/db';\nimport apiRouter from './routers/api';\nimport userRouter from './routers/User';\n\nconst PORT = process.env.PORT || 5000;\n\nconst app = express();\napp.use(bodyParser.urlencoded({ extended: false }));\napp.use(bodyParser.json());\napp.use(cors());\n\n// Request logging\napp.use(morgan('dev'));\n\nconst mode =\n  process.argv[process.argv.length - 1] === 'prod'\n    ? MODE_PRODUCTION\n    : MODE_TEST;\n\n// Connect to MySQL on start\ndb.connect(mode, function(err) {\n  if (err) {\n    console.log('Unable to connect to MySQL.');\n    process.exit(1);\n  } else {\n    // namespaced routes\n    app.use('/api', apiRouter);\n    app.use('/auth', userRouter);\n\n    // Define the port we are listening on\n    app.listen(PORT, () => {\n      console.log(`Listening on port ${PORT}...`);\n    });\n  }\n});\n"]}