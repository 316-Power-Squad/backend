{"version":3,"sources":["../../../server/models/Team/Team.js"],"names":["getTeam","id","done","get","query","err","rows","length","allTeams","newTeam","name","gender","region","includes","result","insertId"],"mappings":";;;;;;;AAGA;;;;AAEA;;;;AAEO,IAAMA,4BAAU,SAAVA,OAAU,CAACC,EAAD,EAAKC,IAAL,EAAc;AACnC,eAAGC,GAAH,GAASC,KAAT,qPASE,CAACH,EAAD,CATF,EAUE,UAACI,GAAD,EAAMC,IAAN,EAAe;AACb,QAAID,GAAJ,EAAS,OAAOH,KAAK,EAAL,eAAP,CAAT,KACK,IAAII,KAAKC,MAAL,KAAgB,CAApB,EAAuB;AAC1B,aAAOL,KAAK,EAAL,sBAAP;AACD;AACDA,SAAKI,IAAL;AACD,GAhBH;AAkBD,CAnBM,C,CAPP;;;AA4BO,IAAME,8BAAW,SAAXA,QAAW,OAAQ;AAC9B,eAAGL,GAAH,GAASC,KAAT,uBAAqC,UAACC,GAAD,EAAMC,IAAN,EAAe;AAClD,QAAID,GAAJ,EAAS,OAAOH,KAAK,EAAL,eAAP;AACTA,SAAKI,IAAL;AACD,GAHD;AAID,CALM;;AAOA,IAAMG,4BAAU,SAAVA,OAAU,CAACC,IAAD,EAAOC,MAAP,EAAeC,MAAf,EAAuBV,IAAvB,EAAgC;AACrD,MAAIQ,KAAKH,MAAL,GAAc,CAAd,IAAmB,CAAC,CAAC,MAAD,EAAS,QAAT,EAAmBM,QAAnB,CAA4BF,MAA5B,CAAxB,EAA6D;AAC3DT,SAAK,EAAL;AACD,GAFD,MAEO;AACL,iBACGC,GADH,GAEGC,KAFH,6DAII,CAACM,IAAD,EAAOC,MAAP,EAAeC,MAAf,CAJJ,EAKI,UAACP,GAAD,EAAMS,MAAN,EAAiB;AACf,UAAIT,GAAJ,EAAS,OAAOH,KAAK,EAAL,eAAP;AACTA,WAAK;AACHD,YAAIa,OAAOC;AADR,OAAL;AAGD,KAVL;AAYD;AACF,CAjBM;;kBAmBQ;AACbf,kBADa;AAEbQ,oBAFa;AAGbC;AAHa,C","file":"Team.js","sourcesContent":["/**\n * Example model for querying the teams\n */\nimport db from '../../helpers/db';\nimport { sqlError } from '../../helpers/db';\nimport { noTeamError, nameError } from './errors';\n\nexport const getTeam = (id, done) => {\n  db.get().query(\n    `\n    SELECT Participates.meet_id, Participates.placement, Meet.name as meet, Meet.date\n    FROM Participates, Meet \n    WHERE Participates.team_id=?\n      AND Meet.id = Participates.meet_id \n    ORDER BY Meet.id DESC \n    LIMIT 10\n  `,\n    [id],\n    (err, rows) => {\n      if (err) return done({}, sqlError);\n      else if (rows.length === 0) {\n        return done({}, noTeamError);\n      }\n      done(rows);\n    }\n  );\n};\n\nexport const allTeams = done => {\n  db.get().query(`SELECT * FROM Team`, (err, rows) => {\n    if (err) return done([], sqlError);\n    done(rows);\n  });\n};\n\nexport const newTeam = (name, gender, region, done) => {\n  if (name.length < 2 || !['mens', 'womens'].includes(gender)) {\n    done([], nameError);\n  } else {\n    db\n      .get()\n      .query(\n        `INSERT INTO Team (name, gender, region) VALUES (?, ?, ?)`,\n        [name, gender, region],\n        (err, result) => {\n          if (err) return done([], sqlError);\n          done({\n            id: result.insertId,\n          });\n        }\n      );\n  }\n};\n\nexport default {\n  getTeam,\n  allTeams,\n  newTeam,\n};\n"]}