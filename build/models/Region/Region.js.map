{"version":3,"sources":["../../../server/models/Region/Region.js"],"names":["getRegion","id","done","get","query","err","rows","length","allRegions"],"mappings":";;;;;;;AAAA;;;;AAEA;;;;AAEO,IAAMA,gCAAY,SAAZA,SAAY,CAACC,EAAD,EAAKC,IAAL,EAAc;AACrC,eAAGC,GAAH,GAASC,KAAT,oCAAkD,CAACH,EAAD,CAAlD,EAAwD,UAACI,GAAD,EAAMC,IAAN,EAAe;AACrE,QAAID,GAAJ,EAAS,OAAOH,KAAK,EAAL,EAASG,GAAT,CAAP,CAAT,KACK,IAAIC,KAAKC,MAAL,KAAgB,CAApB,EAAuB;AAC1B,aAAOL,KAAK,EAAL,wBAAP;AACD;AACDA,SAAKI,KAAK,CAAL,CAAL;AACD,GAND;AAOD,CARM;;AAUA,IAAME,kCAAa,SAAbA,UAAa,OAAQ;AAChC,eAAGL,GAAH,GAASC,KAAT,yNAOE,UAACC,GAAD,EAAMC,IAAN,EAAe;AACb,QAAID,GAAJ,EAAS,OAAOH,KAAK,EAAL,EAASG,GAAT,CAAP;AACTH,SAAKI,IAAL;AACD,GAVH;AAYD,CAbM;;kBAeQ;AACbN,sBADa;AAEbQ;AAFa,C","file":"Region.js","sourcesContent":["import db from '../../helpers/db';\nimport { sqlError } from '../../helpers/db';\nimport { noRegionError } from './errors';\n\nexport const getRegion = (id, done) => {\n  db.get().query(`SELECT * FROM Region WHERE id=?`, [id], (err, rows) => {\n    if (err) return done({}, err);\n    else if (rows.length === 0) {\n      return done({}, noRegionError);\n    }\n    done(rows[0]);\n  });\n};\n\nexport const allRegions = done => {\n  db.get().query(\n    `SELECT Region.id, Region.name, COUNT(*) AS num_teams \n      FROM Region, Team\n      WHERE Region.name<>\"N/A\"\n        AND Team.region_id=Region.id \n      GROUP BY Team.region_id \n      ORDER BY num_teams DESC`,\n    (err, rows) => {\n      if (err) return done([], err);\n      done(rows);\n    }\n  );\n};\n\nexport default {\n  getRegion,\n  allRegions,\n};\n"]}